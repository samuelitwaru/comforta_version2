/*
 * FileUpload GeneXus User Control 0.0.0.182467
 *
 * Copyright 2015, GeneXus
 */
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):"object"===typeof exports?c(require("jquery")):c(window.jQuery)})(function(c){c.ui=c.ui||{};c.ui.version="1.12.1";c.expr.pseudos||(c.expr.pseudos=c.expr[":"]);c.uniqueSort||(c.uniqueSort=c.unique);var f=0,a=Array.prototype.hasOwnProperty,b=Array.prototype.slice;c.cleanData=function(a){return function(b){var h,g,m;for(m=0;null!=(g=b[m]);m++)(h=c._data(g,"events"))&&h.remove&&c(g).triggerHandler("remove");a(b)}}(c.cleanData);c.widget=
function(a,b,h){var g,m,k,l={},n=a.split(".")[0];a=a.split(".")[1];var p=n+"-"+a;h||(h=b,b=c.Widget);c.isArray(h)&&(h=c.extend.apply(null,[{}].concat(h)));c.expr.pseudos[p.toLowerCase()]=function(a){return!!c.data(a,p)};c[n]=c[n]||{};g=c[n][a];m=c[n][a]=function(a,d){if(!this._createWidget)return new m(a,d);arguments.length&&this._createWidget(a,d)};c.extend(m,g,{version:h.version,_proto:c.extend({},h),_childConstructors:[]});k=new b;k.options=c.widget.extend({},k.options);c.each(h,function(a,d){c.isFunction(d)?
l[a]=function(){function c(){return b.prototype[a].apply(this,arguments)}function h(d){return b.prototype[a].apply(this,d)}return function(){var a=this._super,b=this._superApply,e;this._super=c;this._superApply=h;e=d.apply(this,arguments);this._super=a;this._superApply=b;return e}}():l[a]=d});m.prototype=c.widget.extend(k,{widgetEventPrefix:g?k.widgetEventPrefix||a:a},l,{constructor:m,namespace:n,widgetName:a,widgetFullName:p});g?(c.each(g._childConstructors,function(a,d){var b=d.prototype;c.widget(b.namespace+
"."+b.widgetName,m,d._proto)}),delete g._childConstructors):b._childConstructors.push(m);c.widget.bridge(a,m);return m};c.widget.extend=function(d){for(var e=b.call(arguments,1),h=0,g=e.length,m,k;h<g;h++)for(m in e[h])k=e[h][m],a.call(e[h],m)&&void 0!==k&&(c.isPlainObject(k)?d[m]=c.isPlainObject(d[m])?c.widget.extend({},d[m],k):c.widget.extend({},k):d[m]=k);return d};c.widget.bridge=function(a,e){var h=e.prototype.widgetFullName||a;c.fn[a]=function(g){var m="string"===typeof g,k=b.call(arguments,
1),l=this;m?this.length||"instance"!==g?this.each(function(){var b,e=c.data(this,h);if("instance"===g)return l=e,!1;if(!e)return c.error("cannot call methods on "+a+" prior to initialization; attempted to call method '"+g+"'");if(!c.isFunction(e[g])||"_"===g.charAt(0))return c.error("no such method '"+g+"' for "+a+" widget instance");b=e[g].apply(e,k);if(b!==e&&void 0!==b)return l=b&&b.jquery?l.pushStack(b.get()):b,!1}):l=void 0:(k.length&&(g=c.widget.extend.apply(null,[g].concat(k))),this.each(function(){var a=
c.data(this,h);a?(a.option(g||{}),a._init&&a._init()):c.data(this,h,new e(g,this))}));return l}};c.Widget=function(){};c.Widget._childConstructors=[];c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"\x3cdiv\x3e",options:{classes:{},disabled:!1,create:null},_createWidget:function(a,b){b=c(b||this.defaultElement||this)[0];this.element=c(b);this.uuid=f++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=c();this.hoverable=c();this.focusable=c();this.classesElementLookup=
{};b!==this&&(c.data(b,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===b&&this.destroy()}}),this.document=c(b.style?b.ownerDocument:b.document||b),this.window=c(this.document[0].defaultView||this.document[0].parentWindow));this.options=c.widget.extend({},this.options,this._getCreateOptions(),a);this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},
_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){var a=this;this._destroy();c.each(this.classesElementLookup,function(b,c){a._removeClass(c,b)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:c.noop,widget:function(){return this.element},option:function(a,b){var h=a,g,m,k;if(0===arguments.length)return c.widget.extend({},this.options);
if("string"===typeof a)if(h={},g=a.split("."),a=g.shift(),g.length){m=h[a]=c.widget.extend({},this.options[a]);for(k=0;k<g.length-1;k++)m[g[k]]=m[g[k]]||{},m=m[g[k]];a=g.pop();if(1===arguments.length)return void 0===m[a]?null:m[a];m[a]=b}else{if(1===arguments.length)return void 0===this.options[a]?null:this.options[a];h[a]=b}this._setOptions(h);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){"classes"===a&&this._setOptionClasses(b);
this.options[a]=b;"disabled"===a&&this._setOptionDisabled(b);return this},_setOptionClasses:function(a){var b,h,g;for(b in a)g=this.classesElementLookup[b],a[b]!==this.options.classes[b]&&g&&g.length&&(h=c(g.get()),this._removeClass(g,b),h.addClass(this._classes({element:h,keys:b,classes:a,add:!0})))},_setOptionDisabled:function(a){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!a);a&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,
null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(a){function b(){a.element.each(function(a,b){c.map(m.classesElementLookup,function(a){return a}).some(function(a){return a.is(b)})||m._on(c(b),{remove:"_untrackClassesElement"})})}function h(h,l){var n,f;for(f=0;f<h.length;f++)n=m.classesElementLookup[h[f]]||c(),a.add?(b(),n=c(c.uniqueSort(n.get().concat(a.element.get())))):n=c(n.not(a.element).get()),
m.classesElementLookup[h[f]]=n,g.push(h[f]),l&&a.classes[h[f]]&&g.push(a.classes[h[f]])}var g=[],m=this;a=c.extend({element:this.element,classes:this.options.classes||{}},a);a.keys&&h(a.keys.match(/\S+/g)||[],!0);a.extra&&h(a.extra.match(/\S+/g)||[]);return g.join(" ")},_untrackClassesElement:function(a){var b=this;c.each(b.classesElementLookup,function(h,g){-1!==c.inArray(a.target,g)&&(b.classesElementLookup[h]=c(g.not(a.target).get()))});this._off(c(a.target))},_removeClass:function(a,b,c){return this._toggleClass(a,
b,c,!1)},_addClass:function(a,b,c){return this._toggleClass(a,b,c,!0)},_toggleClass:function(a,b,c,g){g="boolean"===typeof g?g:c;var m="string"===typeof a||null===a;a={extra:m?b:c,keys:m?a:b,element:m?this.element:a,add:g};a.element.toggleClass(this._classes(a),g);return this},_on:function(a,b,h){var g,m=this;"boolean"!==typeof a&&(h=b,b=a,a=!1);h?(b=g=c(b),this.bindings=this.bindings.add(b)):(h=b,b=this.element,g=this.widget());c.each(h,function(h,l){function n(){if(a||!0!==m.options.disabled&&!c(this).hasClass("ui-state-disabled"))return("string"===
typeof l?m[l]:l).apply(m,arguments)}"string"!==typeof l&&(n.guid=l.guid=l.guid||n.guid||c.guid++);var f=h.match(/^([\w:-]*)\s*(.*)$/),q=f[1]+m.eventNamespace;if(f=f[2])g.on(q,f,n);else b.on(q,n)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.off(b);this.bindings=c(this.bindings.not(a).get());this.focusable=c(this.focusable.not(a).get());this.hoverable=c(this.hoverable.not(a).get())},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"===
typeof a?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){this._addClass(c(a.currentTarget),null,"ui-state-hover")},mouseleave:function(a){this._removeClass(c(a.currentTarget),null,"ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){this._addClass(c(a.currentTarget),null,"ui-state-focus")},focusout:function(a){this._removeClass(c(a.currentTarget),null,"ui-state-focus")}})},
_trigger:function(a,b,h){var g,m=this.options[a];h=h||{};b=c.Event(b);b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();b.target=this.element[0];if(a=b.originalEvent)for(g in a)g in b||(b[g]=a[g]);this.element.trigger(b,h);return!(c.isFunction(m)&&!1===m.apply(this.element[0],[b].concat(h))||b.isDefaultPrevented())}};c.each({show:"fadeIn",hide:"fadeOut"},function(a,b){c.Widget.prototype["_"+a]=function(h,g,m){"string"===typeof g&&(g={effect:g});var k,l=g?!0===g||"number"===
typeof g?b:g.effect||b:a;g=g||{};"number"===typeof g&&(g={duration:g});k=!c.isEmptyObject(g);g.complete=m;g.delay&&h.delay(g.delay);if(k&&c.effects&&c.effects.effect[l])h[a](g);else if(l!==a&&h[l])h[l](g.duration,g.easing,m);else h.queue(function(b){c(this)[a]();m&&m.call(h[0]);b()})}})});(function(c){var f=function(a,b){var c=/[^\w\-.:]/.test(a)?new Function(f.arg+",tmpl","var _e\x3dtmpl.encode"+f.helper+",_s\x3d'"+a.replace(f.regexp,f.func)+"';return _s;"):f.cache[a]=f.cache[a]||f(f.load(a));return b?c(b,f):function(a){return c(a,f)}};f.cache={};f.load=function(a){return document.getElementById(a).innerHTML};f.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g;f.func=function(a,b,c,e,h,g){if(b)return{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[b]||"\\"+
b;if(c)return"\x3d"===c?"'+_e("+e+")+'":"'+("+e+"\x3d\x3dnull?'':"+e+")+'";if(h)return"';";if(g)return"_s+\x3d'"};f.encReg=/[<>&"'\x00]/g;f.encMap={"\x3c":"\x26lt;","\x3e":"\x26gt;","\x26":"\x26amp;",'"':"\x26quot;","'":"\x26#39;"};f.encode=function(a){return(null==a?"":""+a).replace(f.encReg,function(a){return f.encMap[a]||""})};f.arg="o";f.helper=",print\x3dfunction(s,e){_s+\x3de?(s\x3d\x3dnull?'':s):_e(s);},include\x3dfunction(s,d){_s+\x3dtmpl(s,d);}";"function"===typeof define&&define.amd?define(function(){return f}):
"object"===typeof module&&module.exports?module.exports=f:c.tmpl=f})(this);(function(c){function f(a){return g?g.createObjectURL(a):!1}function a(a){return g?g.revokeObjectURL(a):!1}function b(b,c){!b||"blob:"!==b.slice(0,5)||c&&c.noRevoke||a(b)}function d(a,b,d,h){if(!c.FileReader)return!1;var g=new FileReader;g.onload=function(){b.call(g,this.result)};d&&(g.onabort=g.onerror=function(){d.call(g,this.error)});if(h=g[h||"readAsDataURL"])return h.call(g,a),g}function e(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"}function h(a,g,l){function n(g,k){function n(a,
b){g===k?g&&g(a,b):a instanceof Error?k(a):(b=b||{},b.image=a,g(b))}function r(b,d){d&&c.console&&console.log(d);b&&e("Blob",b)?(a=b,v=f(a)):(v=a,l&&l.crossOrigin&&(u.crossOrigin=l.crossOrigin));u.src=v}var u=document.createElement("img"),v;u.onerror=function(a){b(v,l);k&&k.call(u,a)};u.onload=function(){b(v,l);var c={originalWidth:u.naturalWidth||u.width,originalHeight:u.naturalHeight||u.height};try{h.transform(u,l,n,a,c)}catch(d){k&&k(d)}};if("string"===typeof a)return h.requiresMetaData(l)?h.fetchBlob(a,
r,l):r(),u;if(e("Blob",a)||e("File",a))return(v=f(a))?(u.src=v,u):d(a,function(a){u.src=a},k)}return c.Promise&&"function"!==typeof g?(l=g,new Promise(n)):n(g,g)}var g=c.URL||c.webkitURL;h.requiresMetaData=function(a){return a&&a.meta};h.fetchBlob=function(a,b){b()};h.transform=function(a,b,c,d,h){c(a,h)};h.global=c;h.readFile=d;h.isInstanceOf=e;h.createObjectURL=f;h.revokeObjectURL=a;"function"===typeof define&&define.amd?define(function(){return h}):"object"===typeof module&&module.exports?module.exports=
h:c.loadImage=h})("undefined"!==typeof window&&window||this);(function(c){"function"===typeof define&&define.amd?define(["./load-image","./load-image-scale","./load-image-meta"],c):"object"===typeof module&&module.exports?c(require("./load-image"),require("./load-image-scale"),require("./load-image-meta")):c(window.loadImage)})(function(c){function f(a,b){var d=a&&a.orientation;return!0===d&&!c.orientation||1===d&&c.orientation||(!b||c.orientation)&&1<d&&9>d}function a(a,b){if(1<b&&9>b)switch(a){case 2:case 4:return 4<b;case 5:case 7:return 0===b%2;case 6:case 8:return 2===
b||4===b||5===b||7===b}return!1}var b=c.transform,d=c.requiresCanvas,e=c.requiresMetaData,h=c.transformCoordinates,g=c.getTransformedOptions;(function(a){if(a.global.document){var b=document.createElement("img");b.onload=function(){a.orientation=2===b.width&&3===b.height;if(a.orientation){var c=a.createCanvas(1,1,!0).getContext("2d");c.drawImage(b,1,1,1,1,0,0,1,1);a.orientationCropBug="255,255,255,255"!==c.getImageData(0,0,1,1).data.toString()}};b.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k\x3d"}})(c);
c.requiresCanvas=function(a){return f(a)||d.call(c,a)};c.requiresMetaData=function(a){return f(a,!0)||e.call(c,a)};c.transform=function(a,d,h,g,e){b.call(c,a,d,function(a,b){if(b){var d=c.orientation&&b.exif&&b.exif.get("Orientation");4<d&&9>d&&(d=b.originalWidth,b.originalWidth=b.originalHeight,b.originalHeight=d)}h(a,b)},g,e)};c.getTransformedOptions=function(b,d,h){b=g.call(c,b,d);d=h.exif&&h.exif.get("Orientation");h=b.orientation;var e=c.orientation&&d;!0===h&&(h=d);if(h===e||!(1===h&&1<e&&9>
e||1<h&&9>h))return b;d=b.top;var f=b.right,q=b.bottom,t=b.left,r={},u;for(u in b)Object.prototype.hasOwnProperty.call(b,u)&&(r[u]=b[u]);r.orientation=h;if(4<h&&!(4<e)||5>h&&4<e)r.maxWidth=b.maxHeight,r.maxHeight=b.maxWidth,r.minWidth=b.minHeight,r.minHeight=b.minWidth,r.sourceWidth=b.sourceHeight,r.sourceHeight=b.sourceWidth;if(1<e){switch(e){case 2:f=b.left;t=b.right;break;case 3:d=b.bottom;f=b.left;q=b.top;t=b.right;break;case 4:d=b.bottom;q=b.top;break;case 5:d=b.left;f=b.bottom;q=b.right;t=b.top;
break;case 6:d=b.left;f=b.top;q=b.right;t=b.bottom;break;case 7:d=b.right;f=b.top;q=b.left;t=b.bottom;break;case 8:d=b.right,f=b.bottom,q=b.left,t=b.top}a(h,e)&&(u=d,b=f,d=q,f=t,q=u,t=b)}r.top=d;r.right=f;r.bottom=q;r.left=t;switch(h){case 2:r.right=t;r.left=f;break;case 3:r.top=q;r.right=t;r.bottom=d;r.left=f;break;case 4:r.top=q;r.bottom=d;break;case 5:r.top=t;r.right=q;r.bottom=f;r.left=d;break;case 6:r.top=f;r.right=q;r.bottom=t;r.left=d;break;case 7:r.top=f;r.right=d;r.bottom=t;r.left=q;break;
case 8:r.top=t,r.right=d,r.bottom=f,r.left=q}return r};c.transformCoordinates=function(b,d,g){h.call(c,b,d,g);d=d.orientation;g=c.orientation&&g.exif&&g.exif.get("Orientation");if(d!==g&&(1===d&&1<g&&9>g||1<d&&9>d)){var e=b.getContext("2d"),f=b.width,q=b.height,t=f,r=q;if(4<d&&!(4<g)||5>d&&4<g)b.width=q,b.height=f;4<d&&(t=q,r=f);switch(g){case 2:e.translate(t,0);e.scale(-1,1);break;case 3:e.translate(t,r);e.rotate(Math.PI);break;case 4:e.translate(0,r);e.scale(1,-1);break;case 5:e.rotate(-.5*Math.PI);
e.scale(-1,1);break;case 6:e.rotate(-.5*Math.PI);e.translate(-t,0);break;case 7:e.rotate(-.5*Math.PI);e.translate(-t,r);e.scale(1,-1);break;case 8:e.rotate(.5*Math.PI),e.translate(0,-r)}a(d,g)&&(e.translate(t,r),e.rotate(Math.PI));switch(d){case 2:e.translate(f,0);e.scale(-1,1);break;case 3:e.translate(f,q);e.rotate(Math.PI);break;case 4:e.translate(0,q);e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI);e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI);e.translate(0,-q);break;case 7:e.rotate(.5*Math.PI);
e.translate(f,-q);e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-f,0)}}}});(function(c){"function"===typeof define&&define.amd?define(["./load-image"],c):"object"===typeof module&&module.exports?c(require("./load-image")):c(window.loadImage)})(function(c){function f(a,d,f,n){function p(d,k){if(!(b.DataView&&e&&a&&12<=a.size&&"image/jpeg"===a.type))return d(n);c.readFile(e.call(a,0,f.maxMetaDataSize||262144),function(a){var b=new DataView(a);if(65496!==b.getUint16(0))return k(Error("Invalid JPEG file: Missing JPEG marker."));for(var c=2,e=b.byteLength-4,m=c,p,y;c<e;)if(p=
b.getUint16(c),65504<=p&&65519>=p||65534===p){y=b.getUint16(c+2)+2;if(c+y>b.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if((m=g.jpeg[p])&&!f.disableMetaDataParsers)for(p=0;p<m.length;p+=1)m[p].call(q,b,c,y,n,f);m=c+=y}else break;!f.disableImageHead&&6<m&&(n.imageHead=h.call(a,0,m));d(n)},k,"readAsArrayBuffer")||d(n)}var q=this;f=f||{};if(b.Promise&&"function"!==typeof d)return n=f=d||{},new Promise(p);n=n||{};return p(d,d)}function a(a,b,c){return a&&b&&c?new Blob([c,
e.call(a,b.byteLength)],{type:"image/jpeg"}):null}var b=c.global,d=c.transform,e=b.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),h=b.ArrayBuffer&&ArrayBuffer.prototype.slice||function(a,b){b=b||this.byteLength-a;var c=new Uint8Array(this,a,b),d=new Uint8Array(b);d.set(c);return d.buffer},g={jpeg:{65505:[],65517:[]}};c.transform=function(a,h,g,e,p){c.requiresMetaData(h)?(p=p||{},f(e,function(f){f!==p&&(b.console&&console.log(f),f=p);d.call(c,a,h,g,e,f)},h,p)):d.apply(c,
arguments)};c.blobSlice=e;c.bufferSlice=h;c.replaceHead=function(c,d,h){var g={maxMetaDataSize:1024,disableMetaDataParsers:!0};if(!h&&b.Promise)return f(c,g).then(function(b){return a(c,b.imageHead,d)});f(c,function(b){h(a(c,b.imageHead,d))},g)};c.parseMetaData=f;c.metaDataParsers=g});(function(c){"function"===typeof define&&define.amd?define(["./load-image","./load-image-meta"],c):"object"===typeof module&&module.exports?c(require("./load-image"),require("./load-image-meta")):c(window.loadImage)})(function(c){function f(a){a&&(Object.defineProperty(this,"map",{value:this.ifds[a].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[a]||{}}))}function a(a,b,d){if(d)if(b+d>a.byteLength)console.log("Invalid Exif data: Invalid thumbnail data.");else return new Blob([c.bufferSlice.call(a.buffer,
b,b+d)],{type:"image/jpeg"})}function b(a,b,c){return(!a||a[c])&&(!b||!0!==b[c])}function d(a,c,d,f,l,n,p,q){var t,r,u,v,x,w;if(d+6>a.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else if(t=a.getUint16(d,f),r=d+2+12*t,r+4>a.byteLength)console.log("Invalid Exif data: Invalid directory size.");else{for(u=0;u<t;u+=1)if(v=d+2+12*u,x=a.getUint16(v,f),b(p,q,x)){w=a;var C=c,G=v,y=a.getUint16(v+2,f),D=a.getUint32(v+4,f),E=f,y=e[y],A=void 0,B=void 0,z=A=void 0,F=B=void 0;if(y)if(A=
y.size*D,B=4<A?C+w.getUint32(G+8,E):G+8,B+A>w.byteLength)console.log("Invalid Exif data: Invalid data offset."),w=void 0;else if(1===D)w=y.getValue(w,B,E);else{A=[];for(z=0;z<D;z+=1)A[z]=y.getValue(w,B+z*y.size,E);if(y.ascii){B="";for(z=0;z<A.length;z+=1){F=A[z];if("\x00"===F)break;B+=F}w=B}else w=A}else console.log("Invalid Exif data: Invalid tag type."),w=void 0;l[x]=w;n&&(n[x]=v)}return a.getUint32(r,f)}}f.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965};
f.prototype.ifds={ifd1:{name:"Thumbnail",map:f.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}};f.prototype.get=function(a){return this[a]||this[this.map[a]]};var e={1:{getValue:function(a,b){return a.getUint8(b)},size:1},2:{getValue:function(a,b){return String.fromCharCode(a.getUint8(b))},size:1,ascii:!0},3:{getValue:function(a,b,c){return a.getUint16(b,c)},size:2},4:{getValue:function(a,b,c){return a.getUint32(b,c)},size:4},5:{getValue:function(a,
b,c){return a.getUint32(b,c)/a.getUint32(b+4,c)},size:8},9:{getValue:function(a,b,c){return a.getInt32(b,c)},size:4},10:{getValue:function(a,b,c){return a.getInt32(b,c)/a.getInt32(b+4,c)},size:8}};e[7]=e[1];c.parseExifData=function(c,e,m,k,l){if(!l.disableExif){var n=l.includeExifTags,p=l.excludeExifTags||{34665:{37500:!0}},q=e+10,t;if(1165519206===c.getUint32(e+4))if(q+8>c.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0!==c.getUint16(e+8))console.log("Invalid Exif data: Missing byte alignment offset.");
else{switch(c.getUint16(q)){case 18761:t=!0;break;case 19789:t=!1;break;default:console.log("Invalid Exif data: Invalid byte alignment marker.");return}42!==c.getUint16(q+2,t)?console.log("Invalid Exif data: Missing TIFF marker."):(e=c.getUint32(q+4,t),k.exif=new f,l.disableExifOffsets||(k.exifOffsets=new f,k.exifTiffOffset=q,k.exifLittleEndian=t),(e=d(c,q,q+e,t,k.exif,k.exifOffsets,n,p))&&b(n,p,"ifd1")&&(k.exif.ifd1=e,k.exifOffsets&&(k.exifOffsets.ifd1=q+e)),Object.keys(k.exif.ifds).forEach(function(a){var b=
t,e=k.exif[a];e&&(k.exif[a]=new f(a),k.exifOffsets&&(k.exifOffsets[a]=new f(a)),d(c,q,q+e,b,k.exif[a],k.exifOffsets&&k.exifOffsets[a],n&&n[a],p&&p[a]))}),(l=k.exif.ifd1)&&l[513]&&(l[513]=a(c,q+l[513],l[514])))}}};c.metaDataParsers.jpeg[65505].push(c.parseExifData);c.exifWriters={274:function(a,b,c){var d=b.exifOffsets[274];if(!d)return a;(new DataView(a,d+8,2)).setUint16(0,c,b.exifLittleEndian);return a}};c.writeExifData=function(a,b,d,e){return c.exifWriters[b.exif.map[d]](a,b,e)};c.ExifMap=f});(function(c){"function"===typeof define&&define.amd?define(["./load-image","./load-image-exif"],c):"object"===typeof module&&module.exports?c(require("./load-image"),require("./load-image-exif")):c(window.loadImage)})(function(c){var f=c.ExifMap.prototype;f.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",
296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",
37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",
34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",
41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},
34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",
27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}};f.tags.ifd1=f.tags;f.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",
1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",
7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",
71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},
SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",
4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180\u00b0 CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90\u00b0 CW",6:"Rotate 90\u00b0 CW",7:"Horizontal flip + Rotate 90\u00b0 CW",
8:"Rotate 90\u00b0 CCW"}};f.getText=function(a){var b=this.get(a);switch(a){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":case "Orientation":return this.stringValues[a][b];case "ExifVersion":case "FlashpixVersion":return b?String.fromCharCode(b[0],b[1],
b[2],b[3]):void 0;case "ComponentsConfiguration":return b?this.stringValues[a][b[0]]+this.stringValues[a][b[1]]+this.stringValues[a][b[2]]+this.stringValues[a][b[3]]:void 0;case "GPSVersionID":return b?b[0]+"."+b[1]+"."+b[2]+"."+b[3]:void 0}return String(b)};f.getAll=function(){var a={},b,c;for(b in this)Object.prototype.hasOwnProperty.call(this,b)&&((c=this[b])&&c.getAll?a[this.ifds[b].name]=c.getAll():(c=this.tags[b])&&(a[c]=this.getText(c)));return a};f.getName=function(a){var b=this.tags[a];return"object"===
typeof b?this.ifds[a].name:b};(function(){var a=f.tags,b,c,e;for(b in a)if(Object.prototype.hasOwnProperty.call(a,b))if(c=f.ifds[b])for(b in e=a[b],e)Object.prototype.hasOwnProperty.call(e,b)&&(c.map[e[b]]=Number(b));else f.map[a[b]]=Number(b)})()});(function(c){"function"===typeof define&&define.amd?define(["./load-image"],c):"object"===typeof module&&module.exports?c(require("./load-image")):c(window.loadImage)})(function(c){var f=c.transform;c.createCanvas=function(a,b,d){if(d&&c.global.OffscreenCanvas)return new OffscreenCanvas(a,b);d=document.createElement("canvas");d.width=a;d.height=b;return d};c.transform=function(a,b,d,e,h){f.call(c,c.scale(a,b,h),b,d,e,h)};c.transformCoordinates=function(){};c.getTransformedOptions=function(a,b){var c=
b.aspectRatio,e,h,g;if(!c)return b;e={};for(h in b)Object.prototype.hasOwnProperty.call(b,h)&&(e[h]=b[h]);e.crop=!0;h=a.naturalWidth||a.width;g=a.naturalHeight||a.height;h/g>c?(e.maxWidth=g*c,e.maxHeight=g):(e.maxWidth=h,e.maxHeight=h/c);return e};c.drawImage=function(a,b,c,e,h,g,f,k,l){b=b.getContext("2d");!1===l.imageSmoothingEnabled?(b.msImageSmoothingEnabled=!1,b.imageSmoothingEnabled=!1):l.imageSmoothingQuality&&(b.imageSmoothingQuality=l.imageSmoothingQuality);b.drawImage(a,c,e,h,g,0,0,f,k);
return b};c.requiresCanvas=function(a){return a.canvas||a.crop||!!a.aspectRatio};c.scale=function(a,b,d){function e(){var a=Math.max((t||l)/l,(r||n)/n);1<a&&(l*=a,n*=a)}function h(){var a=Math.min((p||l)/l,(q||n)/n);1>a&&(l*=a,n*=a)}b=b||{};d=d||{};var g=a.getContext||c.requiresCanvas(b)&&!!c.global.HTMLCanvasElement,f=a.naturalWidth||a.width,k=a.naturalHeight||a.height,l=f,n=k,p,q,t,r,u,v,x,w,C;g&&(b=c.getTransformedOptions(a,b,d),x=b.left||0,w=b.top||0,b.sourceWidth?(u=b.sourceWidth,void 0!==b.right&&
void 0===b.left&&(x=f-u-b.right)):u=f-x-(b.right||0),b.sourceHeight?(v=b.sourceHeight,void 0!==b.bottom&&void 0===b.top&&(w=k-v-b.bottom)):v=k-w-(b.bottom||0),l=u,n=v);p=b.maxWidth;q=b.maxHeight;t=b.minWidth;r=b.minHeight;if(g&&p&&q&&b.crop)l=p,n=q,C=u/v-p/q,0>C?(v=q*u/p,void 0===b.top&&void 0===b.bottom&&(w=(k-v)/2)):0<C&&(u=p*v/q,void 0===b.left&&void 0===b.right&&(x=(f-u)/2));else{if(b.contain||b.cover)t=p=p||t,r=q=q||r;b.cover?(h(),e()):(e(),h())}if(g){g=b.pixelRatio;1<g&&(!a.style.width||Math.floor(parseFloat(a.style.width,
10))!==Math.floor(f/g))&&(l*=g,n*=g);c.orientationCropBug&&!a.getContext&&(x||w||u!==f||v!==k)&&(C=a,a=c.createCanvas(f,k,!0),c.drawImage(C,a,0,0,f,k,f,k,b));f=b.downsamplingRatio;if(0<f&&1>f&&l<u&&n<v)for(;u*f>l;)k=c.createCanvas(u*f,v*f,!0),c.drawImage(a,k,x,w,u,v,k.width,k.height,b),w=x=0,u=k.width,v=k.height,a=k;k=c.createCanvas(l,n);c.transformCoordinates(k,b,d);1<g&&(k.style.width=k.width/g+"px");c.drawImage(a,k,x,w,u,v,l,n,b).setTransform(1,0,0,1,0,0);return k}a.width=l;a.height=n;return a}});(function(c){"function"===typeof define&&define.amd?define(["./load-image","./load-image-meta"],c):"object"===typeof module&&module.exports?c(require("./load-image"),require("./load-image-meta")):c(window.loadImage)})(function(c){function f(){}f.prototype.map={ObjectName:5};f.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"};f.prototype.get=function(a){return this[a]||this[this.map[a]]};c.parseIptcData=function(a,b,c,e,h){if(!h.disableIptc)for(c=b+c;b+8<c;){var g=a,m=b;if(943868237===
g.getUint32(m)&&1028===g.getUint16(m+4)){g=a.getUint8(b+7);0!==g%2&&(g+=1);0===g&&(g=4);m=b+8+g;if(m>c){console.log("Invalid IPTC data: Invalid segment offset.");break}g=a.getUint16(b+6+g);if(b+g>c){console.log("Invalid IPTC data: Invalid segment size.");break}e.iptc=new f;h.disableIptcOffsets||(e.iptcOffsets=new f);b=h.includeIptcTags;h=h.excludeIptcTags||{202:!0};var k=void 0,l=void 0;c=void 0;for(g=m+g;m<g;){if(28===a.getUint8(m)&&2===a.getUint8(m+1)&&(c=a.getUint8(m+2),!(b&&!b[c]||h&&h[c]))){var l=
a.getInt16(m+3),n=c,p=e.iptc,q=a,k=m+5;if("binary"===p.types[n])k=new Blob([q.buffer.slice(k,k+l)]);else if("Uint16"===p.types[n])k=q.getUint16(k);else{n=q;p="";for(l=k+l;k<l;k+=1)p+=String.fromCharCode(n.getUint8(k));k=p}l=e.iptc;n=c;p=e.iptc[c];void 0!==p&&(p instanceof Array?(p.push(k),k=p):k=[p,k]);l[n]=k;e.iptcOffsets&&(e.iptcOffsets[c]=m)}m+=1}break}b+=1}};c.metaDataParsers.jpeg[65517].push(c.parseIptcData);c.IptcMap=f});(function(c){"function"===typeof define&&define.amd?define(["./load-image","./load-image-iptc"],c):"object"===typeof module&&module.exports?c(require("./load-image"),require("./load-image-iptc")):c(window.loadImage)})(function(c){var f=c.IptcMap.prototype;f.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",
26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",
105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",
225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"};f.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}};f.getText=function(a){var b=this.get(a);return(a=this.stringValues[this.map[a]])?a[b]:String(b)};f.getAll=function(){var a=
{},b,c;for(b in this)Object.prototype.hasOwnProperty.call(this,b)&&(c=this.tags[b])&&(a[c]=this.getText(c));return a};f.getName=function(a){return this.tags[a]};(function(){var a=f.tags,b=f.map||{},c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[a[c]]=Number(c))})()});(function(c){"function"===typeof define&&define.amd?define(["./load-image"],c):"object"===typeof module&&module.exports?c(require("./load-image")):c(window.loadImage)})(function(c){var f=c.global;f.fetch&&f.Request&&f.Response&&f.Response.prototype.blob?c.fetchBlob=function(a,b,c){function e(a){return a.blob()}if(f.Promise&&"function"!==typeof b)return fetch(new Request(a,b)).then(e);fetch(new Request(a,c)).then(e).then(b)["catch"](function(a){b(null,a)})}:f.XMLHttpRequest&&""===(new XMLHttpRequest).responseType&&
(c.fetchBlob=function(a,b,c){function e(b,e){c=c||{};var f=new XMLHttpRequest;f.open(c.method||"GET",a);c.headers&&Object.keys(c.headers).forEach(function(a){f.setRequestHeader(a,c.headers[a])});f.withCredentials="include"===c.credentials;f.responseType="blob";f.onload=function(){b(f.response)};f.onerror=f.onabort=f.ontimeout=function(a){b===e?e(null,a):e(a)};f.send(c.body)}return f.Promise&&"function"!==typeof b?(c=b,new Promise(e)):e(b,b)})});(function(c){var f=c.HTMLCanvasElement&&c.HTMLCanvasElement.prototype,a;if(a=c.Blob)try{a=Boolean(new Blob)}catch(b){a=!1}var d=a;if(a=d&&c.Uint8Array)try{a=100===(new Blob([new Uint8Array(100)])).size}catch(e){a=!1}var h=a,g=c.BlobBuilder||c.WebKitBlobBuilder||c.MozBlobBuilder||c.MSBlobBuilder,m=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,k=(d||g)&&c.atob&&c.ArrayBuffer&&c.Uint8Array&&function(a){var b,c,e,f;b=a.match(m);if(!b)throw Error("invalid data URI");c=b[2]?b[1]:"text/plain"+(b[3]||";charset\x3dUS-ASCII");
e=!!b[4];a=a.slice(b[0].length);a=e?atob(a):decodeURIComponent(a);e=new ArrayBuffer(a.length);b=new Uint8Array(e);for(f=0;f<a.length;f+=1)b[f]=a.charCodeAt(f);if(d)return new Blob([h?b:e],{type:c});a=new g;a.append(e);return a.getBlob(c)};c.HTMLCanvasElement&&!f.toBlob&&(f.mozGetAsFile?f.toBlob=function(a,b,c){var d=this;setTimeout(function(){c&&f.toDataURL&&k?a(k(d.toDataURL(b,c))):a(d.mozGetAsFile("blob",b))})}:f.toDataURL&&k&&(f.toBlob=f.msToBlob?function(a,b,c){var d=this;setTimeout(function(){(b&&
"image/png"!==b||c)&&f.toDataURL&&k?a(k(d.toDataURL(b,c))):a(d.msToBlob(b))})}:function(a,b,c){var d=this;setTimeout(function(){a(k(d.toDataURL(b,c)))})}));"function"===typeof define&&define.amd?define(function(){return k}):"object"===typeof module&&module.exports?module.exports=k:c.dataURLtoBlob=k})(window);(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):"object"===typeof exports?c(require("jquery")):c(window.jQuery)})(function(c){var f=0,a=c,b="parseJSON";"JSON"in window&&"parse"in JSON&&(a=JSON,b="parse");c.ajaxTransport("iframe",function(a){if(a.async){var b=a.initialIframeSrc||"javascript:false;",h,g,m;return{send:function(k,l){h=c('\x3cform style\x3d"display:none;"\x3e\x3c/form\x3e');h.attr("accept-charset",a.formAcceptCharset);m=/\?/.test(a.url)?"\x26":"?";"DELETE"===a.type?
(a.url=a.url+m+"_method\x3dDELETE",a.type="POST"):"PUT"===a.type?(a.url=a.url+m+"_method\x3dPUT",a.type="POST"):"PATCH"===a.type&&(a.url=a.url+m+"_method\x3dPATCH",a.type="POST");f+=1;g=c('\x3ciframe src\x3d"'+b+'" name\x3d"iframe-transport-'+f+'"\x3e\x3c/iframe\x3e').on("load",function(){var f,k=c.isArray(a.paramName)?a.paramName:[a.paramName];g.off("load").on("load",function(){var a;try{if(a=g.contents(),!a.length||!a[0].firstChild)throw Error();}catch(d){a=void 0}l(200,"success",{iframe:a});c('\x3ciframe src\x3d"'+
b+'"\x3e\x3c/iframe\x3e').appendTo(h);window.setTimeout(function(){h.remove()},0)});h.prop("target",g.prop("name")).prop("action",a.url).prop("method",a.type);a.formData&&c.each(a.formData,function(a,b){c('\x3cinput type\x3d"hidden"/\x3e').prop("name",b.name).val(b.value).appendTo(h)});a.fileInput&&a.fileInput.length&&"POST"===a.type&&(f=a.fileInput.clone(),a.fileInput.after(function(a){return f[a]}),a.paramName&&a.fileInput.each(function(b){c(this).prop("name",k[b]||a.paramName)}),h.append(a.fileInput).prop("enctype",
"multipart/form-data").prop("encoding","multipart/form-data"),a.fileInput.removeAttr("form"));window.setTimeout(function(){h.submit();f&&f.length&&a.fileInput.each(function(a,b){var d=c(f[a]);c(b).prop("name",d.prop("name")).attr("form",d.attr("form"));d.replaceWith(b)})},0)});h.append(g).appendTo(document.body)},abort:function(){g&&g.off("load").prop("src",b);h&&h.remove()}}}});c.ajaxSetup({converters:{"iframe text":function(a){return a&&c(a[0].body).text()},"iframe json":function(d){return d&&a[b](c(d[0].body).text())},
"iframe html":function(a){return a&&c(a[0].body).html()},"iframe xml":function(a){return(a=a&&a[0])&&c.isXMLDoc(a)?a:c.parseXML(a.XMLDocument&&a.XMLDocument.xml||c(a.body).html())},"iframe script":function(a){return a&&c.globalEval(c(a[0].body).text())}}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","jquery-ui/ui/widget"],c):"object"===typeof exports?c(require("jquery"),require("./vendor/jquery.ui.widget")):c(window.jQuery)})(function(c){function f(a){var b="dragover"===a;return function(d){d.dataTransfer=d.originalEvent&&d.originalEvent.dataTransfer;var e=d.dataTransfer;e&&-1!==c.inArray("Files",e.types)&&!1!==this._trigger(a,c.Event(a,{delegatedEvent:d}))&&(d.preventDefault(),b&&(e.dropEffect="copy"))}}c.support.fileInput=
!(/(Android (1\.[0156]|2\.[01]))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.[05]|3\.0))/.test(window.navigator.userAgent)||c('\x3cinput type\x3d"file"/\x3e').prop("disabled"));c.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader);c.support.xhrFormDataFileUpload=!!window.FormData;c.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);c.widget("blueimp.fileupload",{options:{dropZone:c(document),
pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,uniqueFilenames:void 0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},
i18n:function(a,b){a=this.messages[a]||a.toString();b&&c.each(b,function(b,c){a=a.replace("{"+b+"}",c)});return a},formData:function(a){return a.serializeArray()},add:function(a,b){if(a.isDefaultPrevented())return!1;(b.autoUpload||!1!==b.autoUpload&&c(this).fileupload("option","autoUpload"))&&b.process().done(function(){b.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_promisePipe:function(){var a=c.fn.jquery.split(".");return 1<Number(a[0])||7<Number(a[1])?"then":"pipe"}(),_specialOptions:["fileInput",
"dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:c.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.bitrate=this.loaded=0;this.getBitrate=function(a,b,c){var e=a-this.timestamp;if(!this.bitrate||!c||e>c)this.bitrate=1E3/e*(b-this.loaded)*8,this.loaded=b,this.timestamp=a;return this.bitrate}},_isXHRUpload:function(a){return!a.forceIframeTransport&&
(!a.multipart&&c.support.xhrFileUpload||c.support.xhrFormDataFileUpload)},_getFormData:function(a){var b;return"function"===c.type(a.formData)?a.formData(a.form):c.isArray(a.formData)?a.formData:"object"===c.type(a.formData)?(b=[],c.each(a.formData,function(a,c){b.push({name:a,value:c})}),b):[]},_getTotal:function(a){var b=0;c.each(a,function(a,c){b+=c.size||1});return b},_initProgressObject:function(a){var b={loaded:0,total:0,bitrate:0};a._progress?c.extend(a._progress,b):a._progress=b},_initResponseObject:function(a){var b;
if(a._response)for(b in a._response)Object.prototype.hasOwnProperty.call(a._response,b)&&delete a._response[b];else a._response={}},_onProgress:function(a,b){if(a.lengthComputable){var d=Date.now?Date.now():(new Date).getTime(),e;b._time&&b.progressInterval&&d-b._time<b.progressInterval&&a.loaded!==a.total||(b._time=d,e=Math.floor(a.loaded/a.total*(b.chunkSize||b._progress.total))+(b.uploadedBytes||0),this._progress.loaded+=e-b._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(d,
this._progress.loaded,b.bitrateInterval),b._progress.loaded=b.loaded=e,b._progress.bitrate=b.bitrate=b._bitrateTimer.getBitrate(d,e,b.bitrateInterval),this._trigger("progress",c.Event("progress",{delegatedEvent:a}),b),this._trigger("progressall",c.Event("progressall",{delegatedEvent:a}),this._progress))}},_initProgressListener:function(a){var b=this,d=a.xhr?a.xhr():c.ajaxSettings.xhr();d.upload&&(c(d.upload).on("progress",function(c){var d=c.originalEvent;c.lengthComputable=d.lengthComputable;c.loaded=
d.loaded;c.total=d.total;b._onProgress(c,a)}),a.xhr=function(){return d})},_deinitProgressListener:function(a){a=a.xhr?a.xhr():c.ajaxSettings.xhr();a.upload&&c(a.upload).off("progress")},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_getUniqueFilename:function(a,b){a=String(a);if(b[a])return a=a.replace(/(?: \(([\d]+)\))?(\.[^.]+)?$/,function(a,b,c){return" ("+(b?Number(b)+1:1)+")"+(c||"")}),this._getUniqueFilename(a,b);b[a]=!0;return a},_initXHRData:function(a){var b=
this,d,e=a.files[0],h=a.multipart||!c.support.xhrFileUpload,g="array"===c.type(a.paramName)?a.paramName[0]:a.paramName;a.headers=c.extend({},a.headers);a.contentRange&&(a.headers["Content-Range"]=a.contentRange);h&&!a.blob&&this._isInstanceOf("File",e)||(a.headers["Content-Disposition"]='attachment; filename\x3d"'+encodeURI(e.uploadName||e.name)+'"');h?c.support.xhrFormDataFileUpload&&(a.postMessage?(d=this._getFormData(a),a.blob?d.push({name:g,value:a.blob}):c.each(a.files,function(b,e){d.push({name:"array"===
c.type(a.paramName)&&a.paramName[b]||g,value:e})})):(b._isInstanceOf("FormData",a.formData)?d=a.formData:(d=new FormData,c.each(this._getFormData(a),function(a,b){d.append(b.name,b.value)})),a.blob?d.append(g,a.blob,e.uploadName||e.name):c.each(a.files,function(e,h){if(b._isInstanceOf("File",h)||b._isInstanceOf("Blob",h)){var f=h.uploadName||h.name;a.uniqueFilenames&&(f=b._getUniqueFilename(f,a.uniqueFilenames));d.append("array"===c.type(a.paramName)&&a.paramName[e]||g,h,f)}})),a.data=d):(a.contentType=
e.type||"application/octet-stream",a.data=a.blob||e);a.blob=null},_initIframeSettings:function(a){var b=c("\x3ca\x3e\x3c/a\x3e").prop("href",a.url).prop("host");a.dataType="iframe "+(a.dataType||"");a.formData=this._getFormData(a);a.redirect&&b&&b!==location.host&&a.formData.push({name:a.redirectParamName||"redirect",value:a.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType=
"postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(a){var b=c(a.fileInput),d=a.paramName;d?c.isArray(d)||(d=[d]):(d=[],b.each(function(){for(var a=c(this),b=a.prop("name")||"files[]",a=(a.prop("files")||[1]).length;a;)d.push(b),--a}),d.length||(d=[b.prop("name")||"files[]"]));return d},_initFormSettings:function(a){a.form&&a.form.length||(a.form=c(a.fileInput.prop("form")),a.form.length||(a.form=c(this.options.fileInput.prop("form"))));a.paramName=this._getParamName(a);
a.url||(a.url=a.form.prop("action")||location.href);a.type=(a.type||"string"===c.type(a.form.prop("method"))&&a.form.prop("method")||"").toUpperCase();"POST"!==a.type&&"PUT"!==a.type&&"PATCH"!==a.type&&(a.type="POST");a.formAcceptCharset||(a.formAcceptCharset=a.form.attr("accept-charset"))},_getAJAXSettings:function(a){a=c.extend({},this.options,a);this._initFormSettings(a);this._initDataSettings(a);return a},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?
"rejected":"pending"},_enhancePromise:function(a){a.success=a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(a,b,d){var e=c.Deferred(),h=e.promise();b=b||this.options.context||h;!0===a?e.resolveWith(b,d):!1===a&&e.rejectWith(b,d);h.abort=e.promise;return this._enhancePromise(h)},_addConvenienceMethods:function(a,b){var d=this,e=function(a){return c.Deferred().resolveWith(d,a).promise()};b.process=function(a,g){if(a||g)b._processQueue=this._processQueue=(this._processQueue||
e([this]))[d._promisePipe](function(){return b.errorThrown?c.Deferred().rejectWith(d,[b]).promise():e(arguments)})[d._promisePipe](a,g);return this._processQueue||e([this])};b.submit=function(){"pending"!==this.state()&&(b.jqXHR=this.jqXHR=!1!==d._trigger("submit",c.Event("submit",{delegatedEvent:a}),this)&&d._onSend(a,this));return this.jqXHR||d._getXHRPromise()};b.abort=function(){if(this.jqXHR)return this.jqXHR.abort();this.errorThrown="abort";d._trigger("fail",null,this);return d._getXHRPromise(!1)};
b.state=function(){if(this.jqXHR)return d._getDeferredState(this.jqXHR);if(this._processQueue)return d._getDeferredState(this._processQueue)};b.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===d._getDeferredState(this._processQueue)};b.progress=function(){return this._progress};b.response=function(){return this._response}},_getUploadedBytes:function(a){return(a=(a=(a=a.getResponseHeader("Range"))&&a.split("-"))&&1<a.length&&parseInt(a[1],10))&&a+1},_chunkedUpload:function(a,
b){a.uploadedBytes=a.uploadedBytes||0;var d=this,e=a.files[0],h=e.size,g=a.uploadedBytes,f=a.maxChunkSize||h,k=this._blobSlice,l=c.Deferred(),n=l.promise(),p,q;if(!(this._isXHRUpload(a)&&k&&(g||("function"===c.type(f)?f(a):f)<h))||a.data)return!1;if(b)return!0;if(g>=h)return e.error=a.i18n("uploadedBytes"),this._getXHRPromise(!1,a.context,[null,"error",e.error]);q=function(){var b=c.extend({},a),n=b._progress.loaded;b.blob=k.call(e,g,g+("function"===c.type(f)?f(b):f),e.type);b.chunkSize=b.blob.size;
b.contentRange="bytes "+g+"-"+(g+b.chunkSize-1)+"/"+h;d._trigger("chunkbeforesend",null,b);d._initXHRData(b);d._initProgressListener(b);p=(!1!==d._trigger("chunksend",null,b)&&c.ajax(b)||d._getXHRPromise(!1,b.context)).done(function(e,f,k){g=d._getUploadedBytes(k)||g+b.chunkSize;n+b.chunkSize-b._progress.loaded&&d._onProgress(c.Event("progress",{lengthComputable:!0,loaded:g-b.uploadedBytes,total:g-b.uploadedBytes}),b);a.uploadedBytes=b.uploadedBytes=g;b.result=e;b.textStatus=f;b.jqXHR=k;d._trigger("chunkdone",
null,b);d._trigger("chunkalways",null,b);g<h?q():l.resolveWith(b.context,[e,f,k])}).fail(function(a,c,e){b.jqXHR=a;b.textStatus=c;b.errorThrown=e;d._trigger("chunkfail",null,b);d._trigger("chunkalways",null,b);l.rejectWith(b.context,[a,c,e])}).always(function(){d._deinitProgressListener(b)})};this._enhancePromise(n);n.abort=function(){return p.abort()};q();return n},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=
this._progress.total=0,this._progress.bitrate=0);this._initResponseObject(b);this._initProgressObject(b);b._progress.loaded=b.loaded=b.uploadedBytes||0;b._progress.total=b.total=this._getTotal(b.files)||1;b._progress.bitrate=b.bitrate=0;this._active+=1;this._progress.loaded+=b.loaded;this._progress.total+=b.total},_onDone:function(a,b,d,e){var h=e._progress.total,g=e._response;e._progress.loaded<h&&this._onProgress(c.Event("progress",{lengthComputable:!0,loaded:h,total:h}),e);g.result=e.result=a;
g.textStatus=e.textStatus=b;g.jqXHR=e.jqXHR=d;this._trigger("done",null,e)},_onFail:function(a,b,c,e){var h=e._response;e.recalculateProgress&&(this._progress.loaded-=e._progress.loaded,this._progress.total-=e._progress.total);h.jqXHR=e.jqXHR=a;h.textStatus=e.textStatus=b;h.errorThrown=e.errorThrown=c;this._trigger("fail",null,e)},_onAlways:function(a,b,c,e){this._trigger("always",null,e)},_onSend:function(a,b){b.submit||this._addConvenienceMethods(a,b);var d=this,e,h,g,f,k=d._getAJAXSettings(b),
l=function(){d._sending+=1;k._bitrateTimer=new d._BitrateTimer;return e=e||((h||!1===d._trigger("send",c.Event("send",{delegatedEvent:a}),k))&&d._getXHRPromise(!1,k.context,h)||d._chunkedUpload(k)||c.ajax(k)).done(function(a,b,c){d._onDone(a,b,c,k)}).fail(function(a,b,c){d._onFail(a,b,c,k)}).always(function(a,b,c){d._deinitProgressListener(k);d._onAlways(a,b,c,k);--d._sending;--d._active;if(k.limitConcurrentUploads&&k.limitConcurrentUploads>d._sending)for(a=d._slots.shift();a;){if("pending"===d._getDeferredState(a)){a.resolve();
break}a=d._slots.shift()}0===d._active&&d._trigger("stop")})};this._beforeSend(a,k);return this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(1<this.options.limitConcurrentUploads?(g=c.Deferred(),this._slots.push(g),f=g[d._promisePipe](l)):f=this._sequence=this._sequence[d._promisePipe](l,l),f.abort=function(){h=[void 0,"abort","abort"];return e?e.abort():(g&&g.rejectWith(k.context,h),l())},this._enhancePromise(f)):l()},_onAdd:function(a,
b){var d=this,e=!0,h=c.extend({},this.options,b),g=b.files,f=g.length,k=h.limitMultiFileUploads,l=h.limitMultiFileUploadSize,n=h.limitMultiFileUploadSizeOverhead,p=0,q=this._getParamName(h),t,r,u=0;if(!f)return!1;l&&void 0===g[0].size&&(l=void 0);if((h.singleFileUploads||k||l)&&this._isXHRUpload(h))if(h.singleFileUploads||l||!k)if(!h.singleFileUploads&&l)for(r=[],t=[],h=0;h<f;h+=1){if(p+=g[h].size+n,h+1===f||p+g[h+1].size+n>l||k&&h+1-u>=k)r.push(g.slice(u,h+1)),p=q.slice(u,h+1),p.length||(p=q),t.push(p),
u=h+1,p=0}else t=q;else for(r=[],t=[],h=0;h<f;h+=k)r.push(g.slice(h,h+k)),p=q.slice(h,h+k),p.length||(p=q),t.push(p);else r=[g],t=[q];b.originalFiles=g;c.each(r||g,function(g,h){var f=c.extend({},b);f.files=r?h:[h];f.paramName=t[g];d._initResponseObject(f);d._initProgressObject(f);d._addConvenienceMethods(a,f);return e=d._trigger("add",c.Event("add",{delegatedEvent:a}),f)});return e},_replaceFileInput:function(a){var b=a.fileInput,d=b.clone(!0),e=b.is(document.activeElement);a.fileInputClone=d;c("\x3cform\x3e\x3c/form\x3e").append(d)[0].reset();
b.after(d).detach();e&&d.trigger("focus");c.cleanData(b.off("remove"));this.options.fileInput=this.options.fileInput.map(function(a,c){return c===b[0]?d[0]:c});b[0]===this.element[0]&&(this.element=d)},_handleFileTreeEntry:function(a,b){var d=this,e=c.Deferred(),h=[],g,f=function(b){b&&!b.entry&&(b.entry=a);e.resolve([b])},k=function(c){d._handleFileTreeEntries(c,b+a.name+"/").done(function(a){e.resolve(a)}).fail(f)},l=function(){g.readEntries(function(a){a.length?(h=h.concat(a),l()):k(h)},f)};b=
b||"";a.isFile?a._file?(a._file.relativePath=b,e.resolve(a._file)):a.file(function(a){a.relativePath=b;e.resolve(a)},f):a.isDirectory?(g=a.createReader(),l()):e.resolve([]);return e.promise()},_handleFileTreeEntries:function(a,b){var d=this;return c.when.apply(c,c.map(a,function(a){return d._handleFileTreeEntry(a,b)}))[this._promisePipe](function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(a){a=a||{};var b=a.items;return b&&b.length&&(b[0].webkitGetAsEntry||b[0].getAsEntry)?
this._handleFileTreeEntries(c.map(b,function(a){var b;if(a.webkitGetAsEntry){if(b=a.webkitGetAsEntry())b._file=a.getAsFile();return b}return a.getAsEntry()})):c.Deferred().resolve(c.makeArray(a.files)).promise()},_getSingleFileInputFiles:function(a){a=c(a);var b=a.prop("entries");if(b&&b.length)return this._handleFileTreeEntries(b);b=c.makeArray(a.prop("files"));if(b.length)void 0===b[0].name&&b[0].fileName&&c.each(b,function(a,b){b.name=b.fileName;b.size=b.fileSize});else{a=a.prop("value");if(!a)return c.Deferred().resolve([]).promise();
b=[{name:a.replace(/^.*\\/,"")}]}return c.Deferred().resolve(b).promise()},_getFileInputFiles:function(a){return a instanceof c&&1!==a.length?c.when.apply(c,c.map(a,this._getSingleFileInputFiles))[this._promisePipe](function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(a)},_onChange:function(a){var b=this,d={fileInput:c(a.target),form:c(a.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e;b.options.replaceFileInput&&b._replaceFileInput(d);
!1!==b._trigger("change",c.Event("change",{delegatedEvent:a}),d)&&b._onAdd(a,d)})},_onPaste:function(a){var b=a.originalEvent&&a.originalEvent.clipboardData&&a.originalEvent.clipboardData.items,d={files:[]};b&&b.length&&(c.each(b,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&d.files.push(c)}),!1!==this._trigger("paste",c.Event("paste",{delegatedEvent:a}),d)&&this._onAdd(a,d))},_onDrop:function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;var b=this,d=a.dataTransfer,e={};d&&
d.files&&d.files.length&&(a.preventDefault(),this._getDroppedFiles(d).always(function(d){e.files=d;!1!==b._trigger("drop",c.Event("drop",{delegatedEvent:a}),e)&&b._onAdd(a,e)}))},_onDragOver:f("dragover"),_onDragEnter:f("dragenter"),_onDragLeave:f("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste}));
c.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(a,b){var d=-1!==c.inArray(a,this._specialOptions);d&&this._destroyEventHandlers();this._super(a,b);d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var a=
this.options;void 0===a.fileInput?a.fileInput=this.element.is('input[type\x3d"file"]')?this.element:this.element.find('input[type\x3d"file"]'):a.fileInput instanceof c||(a.fileInput=c(a.fileInput));a.dropZone instanceof c||(a.dropZone=c(a.dropZone));a.pasteZone instanceof c||(a.pasteZone=c(a.pasteZone))},_getRegExp:function(a){a=a.split("/");var b=a.pop();a.shift();return new RegExp(a.join("/"),b)},_isRegExpOption:function(a,b){return"url"!==a&&"string"===c.type(b)&&/^\/.*\/[igm]{0,3}$/.test(b)},
_initDataAttributes:function(){var a=this,b=this.options,d=this.element.data();c.each(this.element[0].attributes,function(c,h){var g=h.name.toLowerCase(),f;/^data-/.test(g)&&(g=g.slice(5).replace(/-[a-z]/g,function(a){return a.charAt(1).toUpperCase()}),f=d[g],a._isRegExpOption(g,f)&&(f=a._getRegExp(f)),b[g]=f)})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=0;this._initProgressObject(this);
this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(a){var b=this;a&&!this.options.disabled&&(a.fileInput&&!a.files?this._getFileInputFiles(a.fileInput).always(function(c){a.files=c;b._onAdd(null,a)}):(a.files=c.makeArray(a.files),this._onAdd(null,a)))},send:function(a){if(a&&!this.options.disabled){if(a.fileInput&&!a.files){var b=this,d=c.Deferred(),e=d.promise(),h,g;e.abort=function(){g=!0;if(h)return h.abort();d.reject(null,
"abort","abort");return e};this._getFileInputFiles(a.fileInput).always(function(c){g||(c.length?(a.files=c,h=b._onSend(null,a),h.then(function(a,b,c){d.resolve(a,b,c)},function(a,b,c){d.reject(a,b,c)})):d.reject())});return this._enhancePromise(e)}a.files=c.makeArray(a.files);if(a.files.length)return this._onSend(null,a)}return this._getXHRPromise(!1,a&&a.context)}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload"],c):"object"===typeof exports?c(require("jquery"),require("./jquery.fileupload")):c(window.jQuery)})(function(c){var f=c.blueimp.fileupload.prototype.options.add;c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{processQueue:[],add:function(a,b){var d=c(this);b.process(function(){return d.fileupload("process",b)});f.call(this,a,b)}},processActions:{},_processFile:function(a,b){var d=this,e=c.Deferred().resolveWith(d,
[a]).promise();this._trigger("process",null,a);c.each(a.processQueue,function(a,g){var f=function(a){return b.errorThrown?c.Deferred().rejectWith(d,[b]).promise():d.processActions[g.action].call(d,a,g)};e=e[d._promisePipe](f,g.always&&f)});e.done(function(){d._trigger("processdone",null,a);d._trigger("processalways",null,a)}).fail(function(){d._trigger("processfail",null,a);d._trigger("processalways",null,a)});return e},_transformProcessQueue:function(a){var b=[];c.each(a.processQueue,function(){var d=
{},e=this.action,f=!0===this.prefix?e:this.prefix;c.each(this,function(b,e){"string"===c.type(e)&&"@"===e.charAt(0)?d[b]=a[e.slice(1)||(f?f+b.charAt(0).toUpperCase()+b.slice(1):b)]:d[b]=e});b.push(d)});a.processQueue=b},processing:function(){return this._processing},process:function(a){var b=this,d=c.extend({},this.options,a);d.processQueue&&d.processQueue.length&&(this._transformProcessQueue(d),0===this._processing&&this._trigger("processstart"),c.each(a.files,function(e){var f=e?c.extend({},d):
d,g=function(){return a.errorThrown?c.Deferred().rejectWith(b,[a]).promise():b._processFile(f,a)};f.index=e;b._processing+=1;b._processingQueue=b._processingQueue[b._promisePipe](g,g).always(function(){--b._processing;0===b._processing&&b._trigger("processstop")})}));return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=c.Deferred().resolveWith(this).promise()}})});(function(c){"function"===typeof define&&define.amd?define("jquery load-image load-image-meta load-image-scale load-image-exif load-image-orientation canvas-to-blob ./jquery.fileupload-process".split(" "),c):"object"===typeof exports?c(require("jquery"),require("blueimp-load-image/js/load-image"),require("blueimp-load-image/js/load-image-meta"),require("blueimp-load-image/js/load-image-scale"),require("blueimp-load-image/js/load-image-exif"),require("blueimp-load-image/js/load-image-orientation"),
require("blueimp-canvas-to-blob"),require("./jquery.fileupload-process")):c(window.jQuery,window.loadImage)})(function(c,f){c.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",maxMetaDataSize:"@",disableImageHead:"@",disableMetaDataParsers:"@",disableExif:"@",disableExifOffsets:"@",includeExifTags:"@",excludeExifTags:"@",disableIptc:"@",disableIptcOffsets:"@",includeIptcTags:"@",excludeIptcTags:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,
fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize",imageSmoothingQuality:"@imageSmoothingQuality"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",
minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"});c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1E7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!0,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,
previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(a,b){if(b.disabled)return a;var d=this,e=a.files[a.index],h=c.Deferred();return"number"===c.type(b.maxFileSize)&&e.size>b.maxFileSize||b.fileTypes&&!b.fileTypes.test(e.type)||!f(e,function(b){b.src&&(a.img=b);h.resolveWith(d,[a])},b)?a:h.promise()},resizeImage:function(a,b){if(b.disabled||!a.canvas&&!a.img)return a;b=c.extend({canvas:!0},b);var d=this,e=c.Deferred(),h=
b.canvas&&a.canvas||a.img,g=function(c){c&&(c.width!==h.width||c.height!==h.height||b.forceResize)&&(a[c.getContext?"canvas":"img"]=c);a.preview=c;e.resolveWith(d,[a])},m;if(a.exif&&b.thumbnail&&(m=(m=a.exif.get("Thumbnail"))&&m.get("Blob")))return b.orientation=a.exif.get("Orientation"),f(m,g,b),e.promise();a.orientation?delete b.orientation:a.orientation=b.orientation||f.orientation;return h?(g(f.scale(h,b,a)),e.promise()):a},saveImage:function(a,b){if(!a.canvas||b.disabled)return a;var d=this,
e=a.files[a.index],f=c.Deferred();if(a.canvas.toBlob)a.canvas.toBlob(function(b){b.name||(e.type===b.type?b.name=e.name:e.name&&(b.name=e.name.replace(/\.\w+$/,"."+b.type.substr(6))));e.type!==b.type&&delete a.imageHead;a.files[a.index]=b;f.resolveWith(d,[a])},b.type||e.type,b.quality);else return a;return f.promise()},loadImageMetaData:function(a,b){if(b.disabled)return a;var d=this,e=c.Deferred();f.parseMetaData(a.files[a.index],function(b){c.extend(a,b);e.resolveWith(d,[a])},b);return e.promise()},
saveImageMetaData:function(a,b){if(!(a.imageHead&&a.canvas&&a.canvas.toBlob)||b.disabled)return a;var d=this,e=a.files[a.index],h=c.Deferred();!0===a.orientation&&a.exifOffsets&&f.writeExifData(a.imageHead,a,"Orientation",1);f.replaceHead(e,a.imageHead,function(b){b.name=e.name;a.files[a.index]=b;h.resolveWith(d,[a])});return h.promise()},setImage:function(a,b){a.preview&&!b.disabled&&(a.files[a.index][b.name||"preview"]=a.preview);return a},deleteImageReferences:function(a,b){b.disabled||(delete a.img,
delete a.canvas,delete a.preview,delete a.imageHead);return a}}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],c):"object"===typeof exports?c(require("jquery"),require("blueimp-load-image/js/load-image"),require("./jquery.fileupload-process")):c(window.jQuery,window.loadImage)})(function(c,f){c.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"});
c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(a,b){if(b.disabled)return a;var d=a.files[a.index],e;this._audioElement.canPlayType&&this._audioElement.canPlayType(d.type)&&("number"!==c.type(b.maxFileSize)||d.size<=b.maxFileSize)&&(!b.fileTypes||b.fileTypes.test(d.type))&&(d=f.createObjectURL(d))&&(e=this._audioElement.cloneNode(!1),e.src=d,e.controls=!0,a.audio=e);return a},
setAudio:function(a,b){a.audio&&!b.disabled&&(a.files[a.index][b.name||"preview"]=a.audio);return a}}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],c):"object"===typeof exports?c(require("jquery"),require("blueimp-load-image/js/load-image"),require("./jquery.fileupload-process")):c(window.jQuery,window.loadImage)})(function(c,f){c.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"});
c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(a,b){if(b.disabled)return a;var d=a.files[a.index],e;this._videoElement.canPlayType&&this._videoElement.canPlayType(d.type)&&("number"!==c.type(b.maxFileSize)||d.size<=b.maxFileSize)&&(!b.fileTypes||b.fileTypes.test(d.type))&&(d=f.createObjectURL(d))&&(e=this._videoElement.cloneNode(!1),e.src=d,e.controls=!0,a.video=e);return a},
setVideo:function(a,b){a.video&&!b.disabled&&(a.files[a.index][b.name||"preview"]=a.video);return a}}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],c):"object"===typeof exports?c(require("jquery"),require("./jquery.fileupload-process")):c(window.jQuery)})(function(c){c.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"});c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{getNumberOfFiles:c.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",
acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(f,a){if(a.disabled)return f;var b=c.Deferred(),d=this.options,e=f.files[f.index],h;if(a.minFileSize||a.maxFileSize)h=e.size;"number"===c.type(a.maxNumberOfFiles)&&(d.getNumberOfFiles()||0)+f.files.length>a.maxNumberOfFiles?e.error=d.i18n("maxNumberOfFiles"):!a.acceptFileTypes||a.acceptFileTypes.test(e.type)||a.acceptFileTypes.test(e.name)?h>a.maxFileSize?e.error=
d.i18n("maxFileSize"):"number"===c.type(h)&&h<a.minFileSize?e.error=d.i18n("minFileSize"):delete e.error:e.error=d.i18n("acceptFileTypes");e.error||f.files.error?(f.files.error=!0,b.rejectWith(this,[f])):b.resolveWith(this,[f]);return b.promise()}}})});(function(c){"function"===typeof define&&define.amd?define("jquery blueimp-tmpl ./jquery.fileupload-image ./jquery.fileupload-audio ./jquery.fileupload-video ./jquery.fileupload-validate".split(" "),c):"object"===typeof exports?c(require("jquery"),require("blueimp-tmpl"),require("./jquery.fileupload-image"),require("./jquery.fileupload-audio"),require("./jquery.fileupload-video"),require("./jquery.fileupload-validate")):c(window.jQuery,window.tmpl)})(function(c,f){c.blueimp.fileupload.prototype._specialOptions.push("filesContainer",
"uploadTemplateId","downloadTemplateId");c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{autoUpload:!1,showElementClass:"in",uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",messages:{unknownError:"Unknown error"},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(a){return a.result&&c.isArray(a.result.files)?a.result.files:[]},add:function(a,
b){if(a.isDefaultPrevented())return!1;var d=c(this),e=d.data("blueimp-fileupload")||d.data("fileupload"),f=e.options;b.context=e._renderUpload(b.files).data("data",b).addClass("processing");f.filesContainer[f.prependFiles?"prepend":"append"](b.context);e._forceReflow(b.context);e._transition(b.context);b.process(function(){return d.fileupload("process",b)}).always(function(){b.context.each(function(a){c(this).find(".size").text(e._formatFileSize(b.files[a].size))}).removeClass("processing");e._renderPreviews(b)}).done(function(){b.context.find(".edit,.start").prop("disabled",
!1);!1!==e._trigger("added",a,b)&&(f.autoUpload||b.autoUpload)&&!1!==b.autoUpload&&b.submit()}).fail(function(){b.files.error&&b.context.each(function(a){(a=b.files[a].error)&&c(this).find(".error").text(a)})})},send:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload");b.context&&b.dataType&&"iframe"===b.dataType.substr(0,6)&&b.context.find(".progress").addClass(!c.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width",
"100%");return d._trigger("sent",a,b)},done:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e=(b.getFilesFromResponse||d.options.getFilesFromResponse)(b),f,g;b.context?b.context.each(function(m){var k=e[m]||{error:"Empty file upload result"};g=d._addFinishedDeferreds();d._transition(c(this)).done(function(){var e=c(this);f=d._renderDownload([k]).replaceAll(e);d._forceReflow(f);d._transition(f).done(function(){b.context=c(this);
d._trigger("completed",a,b);d._trigger("finished",a,b);g.resolve()})})}):(f=d._renderDownload(e)[d.options.prependFiles?"prependTo":"appendTo"](d.options.filesContainer),d._forceReflow(f),g=d._addFinishedDeferreds(),d._transition(f).done(function(){b.context=c(this);d._trigger("completed",a,b);d._trigger("finished",a,b);g.resolve()}))},fail:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e,f;b.context?b.context.each(function(g){if("abort"!==
b.errorThrown){var m=b.files[g];m.error=m.error||b.errorThrown||b.i18n("unknownError");f=d._addFinishedDeferreds();d._transition(c(this)).done(function(){var g=c(this);e=d._renderDownload([m]).replaceAll(g);d._forceReflow(e);d._transition(e).done(function(){b.context=c(this);d._trigger("failed",a,b);d._trigger("finished",a,b);f.resolve()})})}else f=d._addFinishedDeferreds(),d._transition(c(this)).done(function(){c(this).remove();d._trigger("failed",a,b);d._trigger("finished",a,b);f.resolve()})}):
"abort"!==b.errorThrown?(b.context=d._renderUpload(b.files)[d.options.prependFiles?"prependTo":"appendTo"](d.options.filesContainer).data("data",b),d._forceReflow(b.context),f=d._addFinishedDeferreds(),d._transition(b.context).done(function(){b.context=c(this);d._trigger("failed",a,b);d._trigger("finished",a,b);f.resolve()})):(d._trigger("failed",a,b),d._trigger("finished",a,b),d._addFinishedDeferreds().resolve())},progress:function(a,b){if(a.isDefaultPrevented())return!1;var d=Math.floor(b.loaded/
b.total*100);b.context&&b.context.each(function(){c(this).find(".progress").attr("aria-valuenow",d).children().first().css("width",d+"%")})},progressall:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this),e=Math.floor(b.loaded/b.total*100),f=d.find(".fileupload-progress"),g=f.find(".progress-extended");g.length&&g.html((d.data("blueimp-fileupload")||d.data("fileupload"))._renderExtendedProgress(b));f.find(".progress").attr("aria-valuenow",e).children().first().css("width",e+"%")},start:function(a){if(a.isDefaultPrevented())return!1;
var b=c(this).data("blueimp-fileupload")||c(this).data("fileupload");b._resetFinishedDeferreds();b._transition(c(this).find(".fileupload-progress")).done(function(){b._trigger("started",a)})},stop:function(a){if(a.isDefaultPrevented())return!1;var b=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),d=b._addFinishedDeferreds();c.when.apply(c,b._getFinishedDeferreds()).done(function(){b._trigger("stopped",a)});b._transition(c(this).find(".fileupload-progress")).done(function(){c(this).find(".progress").attr("aria-valuenow",
"0").children().first().css("width","0%");c(this).find(".progress-extended").html("\x26nbsp;");d.resolve()})},processstart:function(a){if(a.isDefaultPrevented())return!1;c(this).addClass("fileupload-processing")},processstop:function(a){if(a.isDefaultPrevented())return!1;c(this).removeClass("fileupload-processing")},destroy:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e=function(){d._transition(b.context).done(function(){c(this).remove();
d._trigger("destroyed",a,b)})};b.url?(b.dataType=b.dataType||d.options.dataType,c.ajax(b).done(e).fail(function(){d._trigger("destroyfailed",a,b)})):e()}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(a){a=a||c.Deferred();this._finishedUploads.push(a);return a},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var a=c(this),b=a.prop("href"),d=a.prop("download");a.on("dragstart",function(a){try{a.originalEvent.dataTransfer.setData("DownloadURL",
["application/octet-stream",d,b].join(":"))}catch(c){}})},_formatFileSize:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" GB":1E6<=a?(a/1E6).toFixed(2)+" MB":(a/1E3).toFixed(2)+" KB"},_formatBitrate:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" Gbit/s":1E6<=a?(a/1E6).toFixed(2)+" Mbit/s":1E3<=a?(a/1E3).toFixed(2)+" kbit/s":a.toFixed(2)+" bit/s"},_formatTime:function(a){var b=new Date(1E3*a);a=Math.floor(a/86400);return(a?a+"d ":"")+("0"+b.getUTCHours()).slice(-2)+
":"+("0"+b.getUTCMinutes()).slice(-2)+":"+("0"+b.getUTCSeconds()).slice(-2)},_formatPercentage:function(a){return(100*a).toFixed(2)+" %"},_renderExtendedProgress:function(a){return this._formatBitrate(a.bitrate)+" | "+this._formatTime(8*(a.total-a.loaded)/a.bitrate)+" | "+this._formatPercentage(a.loaded/a.total)+" | "+this._formatFileSize(a.loaded)+" / "+this._formatFileSize(a.total)},_renderTemplate:function(a,b){if(!a)return c();var d=a({files:b,formatFileSize:this._formatFileSize,options:this.options});
return d instanceof c?d:c(this.options.templatesContainer).html(d).children()},_renderPreviews:function(a){a.context.find(".preview").each(function(b,d){c(d).empty().append(a.files[b].preview)})},_renderUpload:function(a){return this._renderTemplate(this.options.uploadTemplate,a)},_renderDownload:function(a){return this._renderTemplate(this.options.downloadTemplate,a).find("a[download]").each(this._enableDragToDesktop).end()},_editHandler:function(a){a.preventDefault();if(this.options.edit){var b=
this;a=c(a.currentTarget);var d=a.closest(".template-upload"),e=d.data("data"),f=a.data().index;this.options.edit(e.files[f]).then(function(a){a&&(e.files[f]=a,e.context.addClass("processing"),d.find(".edit,.start").prop("disabled",!0),c(b.element).fileupload("process",e).always(function(){d.find(".size").text(b._formatFileSize(e.files[f].size));e.context.removeClass("processing");b._renderPreviews(e)}).done(function(){d.find(".edit,.start").prop("disabled",!1)}).fail(function(){d.find(".edit").prop("disabled",
!1);var a=e.files[f].error;a&&d.find(".error").text(a)}))})}},_startHandler:function(a){a.preventDefault();a=c(a.currentTarget);var b=a.closest(".template-upload").data("data");a.prop("disabled",!0);b&&b.submit&&b.submit()},_cancelHandler:function(a){a.preventDefault();var b=c(a.currentTarget).closest(".template-upload,.template-download"),d=b.data("data")||{};d.context=d.context||b;d.abort?d.abort():(d.errorThrown="abort",this._trigger("fail",a,d))},_deleteHandler:function(a){a.preventDefault();
var b=c(a.currentTarget);this._trigger("destroy",a,c.extend({context:b.closest(".template-download"),type:"DELETE"},b.data()))},_forceReflow:function(a){return c.support.transition&&a.length&&a[0].offsetWidth},_transition:function(a){var b=c.Deferred();if(c.support.transition&&a.hasClass("fade")&&a.is(":visible")){var d=function(e){e.target===a[0]&&(a.off(c.support.transition.end,d),b.resolveWith(a))};a.on(c.support.transition.end,d).toggleClass(this.options.showElementClass)}else a.toggleClass(this.options.showElementClass),
b.resolveWith(a);return b},_initButtonBarEventHandlers:function(){var a=this.element.find(".fileupload-buttonbar"),b=this.options.filesContainer;this._on(a.find(".start"),{click:function(a){a.preventDefault();b.find(".start").trigger("click")}});this._on(a.find(".cancel"),{click:function(a){a.preventDefault();b.find(".cancel").trigger("click")}});this._on(a.find(".delete"),{click:function(c){c.preventDefault();b.find(".toggle:checked").closest(".template-download").find(".delete").trigger("click");
a.find(".toggle").prop("checked",!1)}});this._on(a.find(".toggle"),{change:function(a){b.find(".toggle").prop("checked",c(a.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .edit":this._editHandler,"click .start":this._startHandler,
"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},
_initTemplates:function(){var a=this.options;a.templatesContainer=this.document[0].createElement(a.filesContainer.prop("nodeName"));f&&(a.uploadTemplateId&&(a.uploadTemplate=f(a.uploadTemplateId)),a.downloadTemplateId&&(a.downloadTemplate=f(a.downloadTemplateId)))},_initFilesContainer:function(){var a=this.options;void 0===a.filesContainer?a.filesContainer=this.element.find(".files"):a.filesContainer instanceof c||(a.filesContainer=c(a.filesContainer))},_initSpecialOptions:function(){this._super();
this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();c.support.fileInput||this._disableFileInputButton()},enable:function(){var a=!1;this.options.disabled&&(a=!0);this._super();a&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton());this._super()}})});(function(c){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload-ui"],c):"object"===typeof exports?c(require("jquery")):c(window.jQuery)})(function(c){c.widget("blueimp.fileupload",c.blueimp.fileupload,{_initSpecialOptions:function(){this._super();this.options.dropZone=this.element.find(".dropzone")},_defineDropZone:function(){c(document).bind("dragover",function(f){var a=c(".dropzone"),b=window.dropZoneTimeout;b?clearTimeout(b):a.addClass("in");f=c(f.target).closest(a);a.not(f).removeClass("hover");
f.addClass("hover");window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null;a.removeClass("in hover")},100)})},_create:function(){this._super();var c=this.element,a=this,b=function(){var b=c.find(".files"),e=b.children().length,e=0<a.options.maxNumberOfFiles&&e>=a.options.maxNumberOfFiles,h=b.children(".template-upload").not(".processing").length,g=b.children(".template-upload.processing").length,m=b.children(".template-download").not(".processing").length,b=b.children(".template-download").not(".processing").find(".toggle:checked").length,
k=c.find(".fileupload-buttonbar");k.find(".start").prop("disabled",0===h);k.find(".cancel").prop("disabled",0===h&&0===g);k.find(".delete").prop("disabled",0===b);k.find(".toggle").prop("disabled",0===m);a.options.autoDisableAdd&&(e?(a._disableFileInputButton(),a.options.dropZone.hide()):(a._enableFileInputButton(),a.options.dropZone.show()))};c.bind("fileuploadfailed fileuploadadded fileuploaddestroyed fileuploadcompleted",b);c.on("click",".toggle",b);c.bind("fileuploadcompleted",function(a,b){(c.data("blueimp-fileupload")||
c.data("fileupload"))._renderPreviews(b)});b();this._defineDropZone()},_destroy:function(){c(document).unbind("dragover").undelegate("dragover")}})});gx.uc.FileUpload=function(c){var f=[],a=0,b=[],d=!1,e=0,h=0,g,m=gx.lang.gxBoolean,k=function(a,b){b=b||"";switch(a){case "image":return/(\.|\/)(gif|jpe?g|png)$/i;case "audio":return/(\.|\/)(mp3|wav|ogg|3gp|aac|wma)$/i;case "video":return/(\.|\/)(avi|flv|wmv|mov|mp4)$/i;case "custom":if(b)return new RegExp("(\\.|\\/)("+b.replace(/,/g,"|")+")$","i")}};this.getFiles=function(){return c.map(f,function(a){if(!a.destroyed)return{FullName:a.name,Name:a.name.replace(new RegExp("."+a.extension+"$","i"),""),
Extension:a.extension,Size:a.size,File:a.path}})};this.getFailedFiles=function(){return c.map(b,function(a){if(!a.destroyed)return{FullName:a.name,Name:a.name.replace(new RegExp("."+a.extension+"$","i"),""),Extension:a.extension,Size:a.size,File:a.path}})};this.show=function(){gx.uc.FileUpload.initTemplates();if(!this.IsPostBack){var l=c(this.getContainerControl());l.attr("id");var n=this.AcceptedFileTypes,p=this.CustomFileTypes,q="",t="",r=k(n,p),u=this.Class||"",v=0;"image"===n||"audio"===n||"video"===
n?q=' accept\x3d"'+n+'/*"':p&&(q=' accept\x3d".'+p.split(",").join(",.")+'"');t=1===Number(this.MaxNumberOfFiles)?"":" multiple";display=!0===this.HideAdditionalButtons?"none":"initial";g=c(['\x3cdiv class\x3d"gx-fileupload ',u,'"\x3e\n\x3cdiv class\x3d"row fileupload-buttonbar"\x3e\n\x3cdiv class\x3d"col-lg-7"\x3e\n\x3cspan class\x3d"btn btn-success fileinput-button" title\x3d"',this.TooltipText,'" \x3e\n\x3ci class\x3d"glyphicon glyphicon-plus"\x3e\x3c/i\x3e\n\x3cspan\x3e',gx.getMessage("GXM_fileupload_addfiles"),
'\x3c/span\x3e\n\x3cinput type\x3d"file" name\x3d"files[]"',t,q,'\x3e\n\x3c/span\x3e\n\x3cbutton type\x3d"submit" class\x3d"btn btn-primary start" style\x3d"display:',display,'" \x3e\n\x3ci class\x3d"glyphicon glyphicon-upload"\x3e\x3c/i\x3e\n\x3cspan\x3e',gx.getMessage("GXM_fileupload_start"),'\x3c/span\x3e\n\x3c/button\x3e\n\x3cbutton type\x3d"reset" class\x3d"btn btn-warning cancel" style\x3d"display:',display,'"\x3e\n\x3ci class\x3d"glyphicon glyphicon-ban-circle"\x3e\x3c/i\x3e\n\x3cspan\x3e',
gx.getMessage("GXM_fileupload_cancel"),'\x3c/span\x3e\n\x3c/button\x3e\n\x3cspan class\x3d"fileupload-process"\x3e\x3c/span\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"col-lg-5 fileupload-progress fade"\x3e\n\x3cdiv class\x3d"progress progress-striped active" role\x3d"progressbar" aria-valuemin\x3d"0" aria-valuemax\x3d"100"\x3e\n\x3cdiv class\x3d"progress-bar progress-bar-success" style\x3d"width:0%;"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"progress-extended"\x3e\x26nbsp;\x3c/div\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"dropzone fade"\x3e\n\x3cspan\x3e',
gx.getMessage("GXM_fileupload_drophere"),'\x3c/span\x3e\n\x3c/div\x3e\n\x3ctable role\x3d"presentation" class\x3d"table table-striped"\x3e\x3ctbody class\x3d"files"\x3e\x3c/tbody\x3e\x3c/table\x3e\n\x3c/div\x3e'].join("\n"));l.append(g);g.fileupload({url:location.pathname.substring(0,location.pathname.lastIndexOf("/")+1)+this.UploadURL+"/gxobject",autoUpload:m(this.AutoUpload)});g.bind("fileuploadadded",function(a,b){v++;var d=c(this.getContainerControl()).find(".table.table-striped");d[0].rows[d[0].rows.length-
1].getElementsByTagName("p")[1].textContent=formatFileSize(b.files[0].size)}.closure(this));g.bind("fileuploaddestroyed",function(a,b){var c=b.context.data("index");f[c].destroyed=!0});g.bind("fileuploadcompleted",function(){d||(e=a);d=!0;a++;a===e+v&&this.UploadComplete&&(this.UploadComplete(),v=0,d=!1,e=0)}.closure(this));g.bind("fileuploadfailed",function(a,d){h++;v--;c.each(d.files,function(a,c){b.push(c)});this.UploadFailed&&this.UploadFailed()}.closure(this));l={disableImageResize:m(this.DisableImageResize),
maxFileSize:this.MaxFileSize,getFilesFromResponse:function(b){for(var c,d=0;d<b.result.files.length;d++)c=b.result.files[d],c._index=a,f.push(c);return b.result.files},messages:{maxNumberOfFiles:gx.getMessage("GXM_fileupload_maxNumberOfFiles"),acceptFileTypes:gx.getMessage("GXM_fileupload_acceptFileTypes"),maxFileSize:gx.getMessage("GXM_fileupload_maxFileSize")},showCancelDownloadButton:this.EnableUploadedFileCanceling,autoDisableAdd:this.AutoDisableAddingFiles};0<this.MaxNumberOfFiles&&(l.maxNumberOfFiles=
Number(this.MaxNumberOfFiles));r&&(l.acceptFileTypes=r);g.fileupload("option",l)}};this.destroy=function(){g&&(g.fileupload("destroy"),c.cleanData(g))};this.Clear=function(){g.find("table tbody.files").empty();g.find("input[type\x3dfile]").removeAttr("disabled");f=[];a=0;b=[];h=0};this.StartUpload=function(){g.find(".start").click()}};formatFileSize=function(c){return"number"!==typeof c?"":1073741824<=c?(c/1073741824).toFixed(2)+" GB":1048576<=c?(c/1048576).toFixed(2)+" MB":(c/1024).toFixed(2)+" KB"};
gx.uc.FileUpload.initTemplates=function(){gx.uc.FileUpload.templatesInitialized||(gx.uc.FileUpload.templatesInitialized=!0,gx.$(['\x3cscript id\x3d"template-upload" type\x3d"text/x-tmpl"\x3e\n{% for (var i\x3d0, file; file\x3do.files[i]; i++) { %}\n\x3ctr class\x3d"template-upload fade"\x3e\n\x3ctd\x3e\n\x3cspan class\x3d"preview"\x3e\x3c/span\x3e\n\x3c/td\x3e\n\x3ctd\x3e\n\x3cp class\x3d"name"\x3e{%\x3dfile.name%}\x3c/p\x3e\n\x3cstrong class\x3d"error text-danger"\x3e\x3c/strong\x3e\n\x3c/td\x3e\n\x3ctd\x3e\n\x3cp class\x3d"size"\x3e',
gx.getMessage("GXM_fileupload_processing"),'\x3c/p\x3e\n\x3cdiv class\x3d"progress progress-striped active" role\x3d"progressbar" aria-valuemin\x3d"0" aria-valuemax\x3d"100" aria-valuenow\x3d"0"\x3e\x3cdiv class\x3d"progress-bar progress-bar-success" style\x3d"width:0%;"\x3e\x3c/div\x3e\x3c/div\x3e\n\x3c/td\x3e\n\x3ctd\x3e\n{% if (!i \x26\x26 !o.options.autoUpload) { %}\n\x3cbutton class\x3d"btn btn-primary start" disabled\x3e\n\x3ci class\x3d"glyphicon glyphicon-upload"\x3e\x3c/i\x3e\n\x3cspan\x3e',
gx.getMessage("GXM_fileupload_startone"),'\x3c/span\x3e\n\x3c/button\x3e\n{% } %}\n{% if (!i) { %}\n\x3cbutton class\x3d"btn btn-warning cancel"\x3e\n\x3ci class\x3d"glyphicon glyphicon-ban-circle"\x3e\x3c/i\x3e\n\x3cspan\x3e',gx.getMessage("GXM_fileupload_cancelone"),"\x3c/span\x3e\n\x3c/button\x3e\n{% } %}\n\x3c/td\x3e\n\x3c/tr\x3e\n{% } %}\n\x3c/script\x3e"].join("\n")).appendTo(document.body),gx.$(['\x3cscript id\x3d"template-download" type\x3d"text/x-tmpl"\x3e\n{% for (var i\x3d0, file; file\x3do.files[i]; i++) { %}\n\x3ctr class\x3d"template-download fade" data-index\x3d"{%\x3dfile._index%}"\x3e\n\x3ctd\x3e\n\x3cspan class\x3d"preview"\x3e\x3c/span\x3e\n\x3c/td\x3e\n\x3ctd\x3e\n\x3cp class\x3d"name"\x3e\n\x3cspan {%\x3dfile.thumbnailUrl?\'data-gallery\':\'\'%}\x3e{%\x3dfile.name%}\x3c/span\x3e\n\x3c/p\x3e\n{% if (file.error) { %}\n\x3cdiv\x3e\x3cspan class\x3d"label label-danger"\x3e',
gx.getMessage("GXM_fileupload_error"),'\x3c/span\x3e\x3cstrong class\x3d"error text-danger"\x3e{%\x3dfile.error%}\x3c/strong\x3e\x3c/div\x3e\n{% } %}\n\x3c/td\x3e\n\x3ctd\x3e\n\x3cspan class\x3d"size"\x3e{%\x3do.formatFileSize(file.size)%}\x3c/span\x3e\n\x3c/td\x3e\n\x3ctd\x3e\n{% if (o.options.showCancelDownloadButton) { %}\n\x3cbutton class\x3d"btn btn-danger delete" data-type\x3d"{%\x3dfile.deleteType%}" data-url\x3d"{%\x3dfile.deleteUrl%}"{% if (file.deleteWithCredentials) { %} data-xhr-fields\x3d\'{"withCredentials":true}\'{% } %}\x3e\n\x3ci class\x3d"glyphicon glyphicon-trash"\x3e\x3c/i\x3e\n\x3cspan\x3e',
gx.getMessage("GXM_fileupload_cancelone"),"\x3c/span\x3e\n\x3c/button\x3e\n{% } %}\n\x3c/td\x3e\n\x3c/tr\x3e\n{% } %}\n\x3c/script\x3e"].join("\n")).appendTo(document.body))};gx.$(gx.uc.FileUpload.initTemplates);

//# sourceMappingURL=fileupload.min.map
